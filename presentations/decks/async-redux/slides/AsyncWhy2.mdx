import {
CodeSurfer,
CodeSurferColumns,
Step,
} from "code-surfer"

import { Layout1 } from '../../../Components/Layout.jsx'

<CodeSurfer>

```tsx title="Handling async code with Redux" subtitle="Fetch handling inside component"
import React, { useEffect } from 'react'
import { connect } from 'react-redux'
import { actions } from 'Redux/Store'

const mapStateToProps = () => {
  return {}
}

const mapDispatchToProps = {
  addPost: actions.addPost,
  fetchPostError: actions.fetchPostError,
}

const SomeComponent = ({ addPost, fetchPostError }) => {
  // ...

  useEffect(() => {
    fetch('https://example.com/post/1')
      .then(response => {
          return response.json()
      })
      .then(post => addPost(post)) // dispatch action
      .catch(error => fetchPostError(error)) // dispatch action
  }, [addPost, fetchPostError])

  // ...

  return (
    // ...
  )
}

export default connect(mapStateToProps, mapDispatchToProps)(SomeComponent)
```

```diff 9:12

```

```diff 14

```

```diff 16:24

```

```tsx title="Handling async code with Redux" subtitle="Fetch handling outside of the component"
import React, { useEffect } from 'react'
import { connect } from 'react-redux'
import { actions } from 'Redux/Store'

const mapStateToProps = () => {
  return {}
}

const mapDispatchToProps = {
  fetchPost: actions.fetchPost,
}

const SomeComponent = ({ fetchPost }) => {
  // ...

  useEffect(() => {
    // fetch, success, failure are all handled outside
    fetchPost()
  }, [fetchPost])

  // ...

  return (
    // ...
  )
}

export default connect(mapStateToProps, mapDispatchToProps)(SomeComponent)
```

</CodeSurfer>
